/**
 * Backbone Dropbox Datastore Adapter
 * Version 0.0.1
 *
 * https://github.com/dmytroyarmak/Backbone.dropboxDatastore
 */(function(a,b){"use strict",typeof exports=="object"&&typeof require=="function"?module.exports=b(require("underscore"),require("backbone")):typeof define=="function"&&define.amd?define(["underscore","backbone"],function(c,d){return b(c||a._,d||a.Backbone)}):b(_,Backbone)})(this,function(a,b){return"use strict",b.DropboxDatastore=function(a){this.name=a},a.extend(b.DropboxDatastore.prototype,{save:function(a){},create:function(a){},update:function(a){},find:function(a){},findAll:function(){},destroy:function(a){},dropboxDatastore:function(){return b.DropboxDatastore.datastore}}),b.DropboxDatastore.sync=b.dropboxDatastoreSync=function(a,c,d){var e=c.dropboxDatastore||c.collection.dropboxDatastore,f,g,h=b.$.Deferred&&b.$.Deferred();try{switch(a){case"read":f=c.id===void 0?e.findAll():e.find(c);break;case"create":f=e.create(c);break;case"update":f=e.update(c);break;case"delete":f=e.destroy(c)}}catch(i){g=i.message}return f?(d&&d.success&&(b.VERSION==="0.9.10"?d.success(c,f,d):d.success(f)),h&&h.resolve(f)):(g=g?g:"Record Not Found",d&&d.error&&(b.VERSION==="0.9.10"?d.error(c,g,d):d.error(g)),h&&h.reject(g)),d&&d.complete&&d.complete(f),h&&h.promise()},b.ajaxSync=b.sync,b.getSyncMethod=function(a){return a.dropboxDatastore||a.collection&&a.collection.dropboxDatastore?b.dropboxDatastoreSync:b.ajaxSync},b.sync=function(a,c,d){return b.getSyncMethod(c).apply(this,[a,c,d])},b.DropboxDatastore});