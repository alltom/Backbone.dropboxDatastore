/*! backbone.dropboxDatastore - v0.0.1 - 2013-10-06
* Copyright (c) 2013 Dmytro Yarmak <dmytroyarmak@gmail.com>;*/
!function(a,b){"use strict";"object"==typeof exports&&"function"==typeof require?module.exports=b(require("underscore"),require("backbone")):"function"==typeof define&&define.amd?define(["underscore","backbone"],function(c,d){return b(c||a._,d||a.Backbone)}):b(_,Backbone)}(this,function(a,b){"use strict";return b.DropboxDatastore=function(a){this.name=a},a.extend(b.DropboxDatastore.prototype,{save:function(){},create:function(){},update:function(){},find:function(){},findAll:function(){},destroy:function(){},dropboxDatastore:function(){return b.DropboxDatastore.datastore}}),b.DropboxDatastore.sync=b.dropboxDatastoreSync=function(a,c,d){var e,f,g=c.dropboxDatastore||c.collection.dropboxDatastore,h=b.$.Deferred&&b.$.Deferred();try{switch(a){case"read":e=void 0===c.id?g.findAll():g.find(c);break;case"create":e=g.create(c);break;case"update":e=g.update(c);break;case"delete":e=g.destroy(c)}}catch(i){f=i.message}return e?(d&&d.success&&("0.9.10"===b.VERSION?d.success(c,e,d):d.success(e)),h&&h.resolve(e)):(f=f?f:"Record Not Found",d&&d.error&&("0.9.10"===b.VERSION?d.error(c,f,d):d.error(f)),h&&h.reject(f)),d&&d.complete&&d.complete(e),h&&h.promise()},b.ajaxSync=b.sync,b.getSyncMethod=function(a){return a.dropboxDatastore||a.collection&&a.collection.dropboxDatastore?b.dropboxDatastoreSync:b.ajaxSync},b.sync=function(a,c,d){return b.getSyncMethod(c).apply(this,[a,c,d])},b.DropboxDatastore});